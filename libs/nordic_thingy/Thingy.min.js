var g=V10,h=V11,n=V12,p=D22,k=[V13,V14,V15],l=D23,q=D24,r=D17,t=D28,m=V4,e=D27,f=D29,c=new I2C;c.setup({sda:7,scl:8,bitrate:4E5});exports.I2C=c;var d=new I2C;d.setup({sda:14,scl:15,bitrate:4E5});exports.I2CE=d;exports.onAcceleration=function(a){a?(this.accel||(this.accel=require("LIS2DH12").connectI2C(d)),this.accel.callback=a,this.accel.setPowerMode("low")):(this.accel&&this.accel.setPowerMode("powerdown"),this.accel=void 0)};exports.getAcceleration=function(a){this.accel?this.accel.readXYZ(a):
require("LIS2DH12").connectI2C(d).readXYZ(a)};exports.onPressure=function(a){a?(this.pressure||(this.pressure=require("LPS22HB").connectI2C(c,{"int":l}),this.pressure.on("data",function(a){this.pressureCallback(a)}.bind(this))),this.pressureCallback=a):(this.pressure&&this.pressure.stop(),this.pressureCallback=this.pressure=void 0)};exports.getPressure=function(a){if(this.pressure)this.pressure.read(a);else{var b=require("LPS22HB").connectI2C(c,{"int":l});b.read(function(c){b.stop();a(c)})}};exports.onHumidity=
function(a){a?(this.humidity||(this.humidity=require("HTS221").connect(c,{"int":q}),this.humidity.on("data",function(a){this.humidityCallback(a)}.bind(this))),this.humidityCallback=a):(this.humidity&&this.humidity.stop(),this.humidityCallback=this.humidity=void 0)};exports.getHumidity=function(a){if(this.humidity)this.humidity.read(a);else this.onHumidity(function(b){this.onHumidity();a(b)}.bind(this))};exports.onGas=function(a){a?(this.gas||(g.set(),h.set(),n.reset(),this.gas=require("CCS811").connectI2C(c,
{"int":p}),this.gas.on("data",function(a){this.gasCallback(a)}.bind(this))),this.gasCallback=a):(this.gas&&(this.gas.stop(),h.reset(),g.reset()),this.gasCallback=this.gas=void 0)};exports.getGas=function(a){if(this.gas)a(this.gas.get());else this.onGas(function(b){this.onGas();a(b)}.bind(this))};exports.onColor=function(a){a?(this.color||(digitalWrite(k,0),this.color=require("BH1745").connectI2C(c),this.colorInt=setInterval(function(){this.colorCallback(this.color.read())}.bind(this),200)),this.colorCallback=
a):(this.color&&(clearInterval(this.colorInt),this.color.stop(),digitalWrite(k,7)),this.colorCallback=this.colorInt=this.color=void 0)};exports.getColor=function(a){if(this.color)a(this.color.read());else this.onColor(function(b){this.onColor();a(b)}.bind(this))};exports.getBattery=function(a){m.set();var b={charging:r.read(),voltage:E.getAnalogVRef()*analogRead(t)*1500/180};m.reset();a&&a(b);return b};exports.sound=function(a,b,c){this.sounds||(this.sounds=0);if(2<this.sounds)throw Error("Too many sounds playing at once");
var d=new Waveform(a.length);d.buffer.set(a);d.on("finish",function(a){this.sounds--;this.sounds||(f.reset(),digitalWrite(e,0));c&&c()}.bind(this));this.sounds||(analogWrite(e,.5,{freq:4E4}),f.set());this.sounds++;d.startOutput(e,b)};exports.beep=function(a,b){b=0<b?b:250;analogWrite(e,.5,{freq:0<a?a:500});f.set();this.beepTimeout&&clearTimeout(this.beepTimeout);this.beepTimeout=setTimeout(function(){delete this.beepTimeout;f.reset();digitalWrite(e,0)}.bind(this),b)};E.on("init",function(){if(exports.accel&&
exports.accel.callback){var a=exports.accel.callback;exports.accel=void 0;exports.onAcceleration(a)}exports.pressureCallback&&(exports.pressure=void 0,exports.onPressure(exports.pressureCallback));exports.humidityCallback&&(exports.humidity=void 0,exports.onHumidity(exports.humidityCallback));exports.gasCallback&&(exports.gas=void 0,exports.onGas(exports.gasCallback));exports.colorCallback&&(exports.color=void 0,exports.onColor(exports.colorCallback))})